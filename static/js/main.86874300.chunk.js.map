{"version":3,"sources":["Disk.tsx","useEventListener.js","Pointer.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Canvas","styled","canvas","props","rotation","Disk","canvasRef","React","createRef","useEffect","current","ctx","getContext","width","height","Error","CENTER","RADIUS","slice","start","color","beginPath","moveTo","arc","Math","PI","lineTo","fillStyle","closePath","fill","ref","useEventListener","eventName","handler","element","window","savedHandler","addEventListener","eventListener","event","removeEventListener","Handle","div","attrs","style","transform","Pointer","handleRef","isDragging","setIsDragging","startX","setStartX","setRotation","onMouseDown","target","x","onMouseUp","onMouseMove","d","max","min","Container","ButtonContainer","Cover","isOpen","App","coverRef","useState","setIsOpen","isPeeking","setIsPeeking","randomize","useCallback","random","onRandomizeClick","once","className","onClick","onMouseLeave","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.86874300.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst Canvas = styled.canvas<{ rotation: number }>`\n\ttransform: rotate(${props => props.rotation - 90}deg);\n`\n\nconst SLICE_WIDTH = 10; // deg\n\ntype Props = {\n\trotation: number\n}\n\nfunction Disk(props: Props) {\n\tconst canvasRef = React.createRef<HTMLCanvasElement>();\n\tReact.useEffect(() => {\n\t\tif (canvasRef.current) {\n\t\t\tconst ctx = canvasRef.current.getContext('2d');\n\t\t\tif (!ctx) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { width, height } = canvasRef.current;\n\t\t\tif (width !== height) {\n\t\t\t\tthrow new Error('Canvas needs to be a square')\n\t\t\t}\n\t\t\tconst CENTER: [number, number] = [width / 2, height / 2];\n\t\t\tconst RADIUS = width / 2;\n\n\t\t\tconst slice = (start: number, color: string) => {\n\t\t\t\tif (!ctx) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(...CENTER);\n\t\t\t\tctx.arc(CENTER[0], CENTER[1], RADIUS, start, start + (Math.PI / 180) * SLICE_WIDTH);\n\t\t\t\tctx.lineTo(...CENTER);\n\t\t\t\tctx.fillStyle = color;\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.beginPath();\n\t\t\t// Circle background\n\t\t\tctx.arc(CENTER[0], CENTER[1], RADIUS, 0, Math.PI * 2);\n\t\t\tctx.fillStyle = '#fff';\n\t\t\tctx.fill();\n\t\t\t// 2 slices\n\t\t\tslice(-(Math.PI / 180) * 115, 'yellow');\n\t\t\tslice(-(Math.PI / 180) * 75, 'yellow');\n\t\t\t// 3 slices\n\t\t\tslice(-(Math.PI / 180) * 105, 'orange');\n\t\t\tslice(-(Math.PI / 180) * 85, 'orange');\n\t\t\t// 4\n\t\t\tslice(-(Math.PI / 180) * 95, 'turquoise');\n\t\t}\n\t}, [canvasRef.current])\n\treturn <Canvas\n\t\twidth=\"500\"\n\t\theight=\"500\"\n\t\tref={canvasRef}\n\t\trotation={props.rotation}\n\t/>\n\n}\n\nexport default Disk;\n","import * as React from 'react';\n\nexport default function useEventListener(eventName, handler, element = window){\n\t// Create a ref that stores handler\n\tconst savedHandler = React.useRef();\n\t\n\t// Update ref.current value if handler changes.\n\t// This allows our effect below to always get latest handler ...\n\t// ... without us needing to pass it in effect deps array ...\n\t// ... and potentially cause effect to re-run every render.\n\tReact.useEffect(() => {\n\t  savedHandler.current = handler;\n\t}, [handler]);\n  \n\tReact.useEffect(\n\t  () => {\n\t\t// Make sure element supports addEventListener\n\t\t// On \n\t\tconst isSupported = element && element.addEventListener;\n\t\tif (!isSupported) return;\n\t\t\n\t\t// Create event listener that calls handler function stored in ref\n\t\tconst eventListener = event => savedHandler.current(event);\n\t\t\n\t\t// Add event listener\n\t\telement.addEventListener(eventName, eventListener);\n\t\t\n\t\t// Remove event listener on cleanup\n\t\treturn () => {\n\t\t  element.removeEventListener(eventName, eventListener);\n\t\t};\n\t  },\n\t  [eventName, element] // Re-run if eventName or element changes\n\t);\n  };","import * as React from 'react';\nimport styled from 'styled-components';\nimport useEventListener from './useEventListener';\n\nconst Handle = styled.div.attrs<{ rotation: number }>(props => ({\n\tstyle: {\n\t\ttransform: `rotate(${props.rotation}deg)`\n\t}\n}))<{ rotation: number }>`\n\twidth: 8px;\n\theight: 230px;\n\tposition: absolute;\n\ttop: 20px;\n\tleft: 246px;\n\tbackground: red;\n\ttransform-origin: center 100%;\n`\n\nexport default function Pointer() {\n\tconst handleRef = React.useRef<HTMLDivElement | null>(null);\n\tconst [isDragging, setIsDragging] = React.useState(false);\n\tconst [startX, setStartX] = React.useState(0);\n\tconst [rotation, setRotation] = React.useState(0);\n\tconst onMouseDown = React.useCallback((event: MouseEvent) => {\n\t\tif (!handleRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.target === handleRef.current) {\n\t\t\tsetStartX(event.x);\n\t\t\tsetIsDragging(true);\n\t\t}\n\t}, []);\n\tconst onMouseUp = React.useCallback((event: MouseEvent) => {\n\t\tif (!isDragging) {\n\t\t\treturn;\n\t\t}\n\t\tsetIsDragging(false);\n\t}, [isDragging]);\n\tconst onMouseMove = React.useCallback((event: MouseEvent) => {\n\t\tif (!isDragging) {\n\t\t\treturn;\n\t\t}\n\t\tconst d = event.x - startX;\n\t\tsetStartX(event.x);\n\t\tsetRotation(Math.max(Math.min(rotation + d / 2, 90), -90));\n\t}, [isDragging, rotation, startX]);\n\tuseEventListener('mousedown', onMouseDown);\n\tuseEventListener('mouseup', onMouseUp);\n\tuseEventListener('mousemove', onMouseMove);\n\treturn (\n\t\t<Handle ref={handleRef} rotation={rotation} />\n\t)\n}","import React from 'react';\nimport styled from 'styled-components';\nimport './App.css';\nimport Disk from './Disk';\nimport Pointer from './Pointer';\n\nconst Container = styled.div`\n\tposition: relative;\n`\n\nconst ButtonContainer = styled.div`\n\theight: 251px;\n\twidth: 500px;\n\tposition: absolute;\n\ttop: 250px;\n\tbackground: #282c34;\n`\n\nconst Cover = styled.div<{ isOpen: boolean }>`\n\theight: 250px;\n\twidth: 500px;\n\tposition: absolute;\n\tborder-top-left-radius: 250px;\n\tborder-top-right-radius: 250px;\n\ttop: 0px;\n\tbackground: turquoise;\n\ttransform-origin: center 100%;\n\ttransform: ${props => props.isOpen ? 'rotate(-180deg)' : 'rotate(0deg)'};\n\ttransition: transform 0.5s;\n`\n\nfunction App() {\n\tconst coverRef = React.createRef<HTMLDivElement>();\n\tconst [rotation, setRotation] = React.useState(0);\n\tconst [isOpen, setIsOpen] = React.useState(true);\n\tconst [isPeeking, setIsPeeking] = React.useState(false);\n\tconst randomize = React.useCallback(() => {\n\t\tsetRotation(Math.random() * 180);\n\t}, []);\n\tconst onRandomizeClick = React.useCallback(() => {\n\t\tif (!coverRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tif (isOpen) {\n\t\t\tsetIsOpen(false);\n\t\t\tcoverRef.current.addEventListener('transitionend', randomize, { once: true });\n\t\t} else {\n\t\t\trandomize();\n\t\t}\n\t}, [isOpen, coverRef, randomize]);\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<header className=\"App-header\">\n\t\t\t\t<Container>\n\t\t\t\t\t<Disk rotation={rotation} />\n\t\t\t\t\t<Cover isOpen={isOpen || isPeeking} ref={coverRef} />\n\t\t\t\t\t<Pointer />\n\t\t\t\t\t<ButtonContainer>\n\t\t\t\t\t\t<button onClick={isOpen ? onRandomizeClick : () => setIsOpen(true)}>{isOpen ? 'Randomize' : 'Reveal'}</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonMouseDown={() => setIsPeeking(true)}\n\t\t\t\t\t\t\tonMouseUp={() => setIsPeeking(false)}\n\t\t\t\t\t\t\tonMouseLeave={() => setIsPeeking(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPeek\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</ButtonContainer>\n\t\t\t\t</Container>\n\t\t\t</header>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}